<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage"><head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="icon" href="/favicon.svg">

  <title>
  Multi Column Unique Indexes - Moorberry
  </title>
  <meta name="description" content="When a database key is created from a combination of two or more columns, the key is called a composite key. Each column may not be unique by itself within the database table but when combined with the other column(s) in the composite key, the combination is unique.
The following data is taken from the Google DFP Report API example source code.
CREATE TABLE `src_dfp` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `ad_unit_1` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `ad_unit_2` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `ad_unit_id_1` int(11) DEFAULT NULL, `ad_unit_id_2` int(11) DEFAULT NULL, `advertiser_id` int(11) DEFAULT NULL, `advertiser_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `creative_id` bigint(11) DEFAULT NULL, `creative_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `date` date DEFAULT NULL, `line_item_cost_per_unit` int(11) DEFAULT NULL, `line_item_cost_type` varchar(11) COLLATE utf8_unicode_ci DEFAULT NULL, `line_item_end_date_time` datetime DEFAULT NULL, `line_item_id` int(11) DEFAULT NULL, `line_item_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `line_item_start_date_time` datetime DEFAULT NULL, `line_item_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `merged_ad_server_clicks` int(11) DEFAULT NULL, `merged_ad_server_impressions` int(11) DEFAULT NULL, `order_end_date_time` datetime DEFAULT NULL, `order_id` int(11) DEFAULT NULL, `order_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `order_start_date_time` datetime DEFAULT NULL, `created_at` datetime DEFAULT NOW(), `updated_at` datetime DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `composite_dfp` (`date`,`ad_unit_id_1`,`ad_unit_id_2`,`advertiser_id`,`creative_id`,`line_item_id`,`order_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; Or to modify an existing table:" />
  <meta name="author" content="Michael Minter" />
  <meta name="generator" content="Hugo 0.121.2"><link
    rel="stylesheet"
    href="https://moorberry.net/css/styles.min.303d46321c48bea2e6b29f914a05d26d22d6ca8db6124799960c58c4caae2d57.css"
    integrity="sha256-MD1GMhxIvqLmsp+RSgXSbSLWyo22EkeZlgxYxMquLVc="
  />
  
  

  <meta property="og:title" content="Multi Column Unique Indexes" />
<meta property="og:description" content="When a database key is created from a combination of two or more columns, the key is called a composite key. Each column may not be unique by itself within the database table but when combined with the other column(s) in the composite key, the combination is unique.
The following data is taken from the Google DFP Report API example source code.
CREATE TABLE `src_dfp` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `ad_unit_1` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `ad_unit_2` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `ad_unit_id_1` int(11) DEFAULT NULL, `ad_unit_id_2` int(11) DEFAULT NULL, `advertiser_id` int(11) DEFAULT NULL, `advertiser_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `creative_id` bigint(11) DEFAULT NULL, `creative_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `date` date DEFAULT NULL, `line_item_cost_per_unit` int(11) DEFAULT NULL, `line_item_cost_type` varchar(11) COLLATE utf8_unicode_ci DEFAULT NULL, `line_item_end_date_time` datetime DEFAULT NULL, `line_item_id` int(11) DEFAULT NULL, `line_item_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `line_item_start_date_time` datetime DEFAULT NULL, `line_item_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `merged_ad_server_clicks` int(11) DEFAULT NULL, `merged_ad_server_impressions` int(11) DEFAULT NULL, `order_end_date_time` datetime DEFAULT NULL, `order_id` int(11) DEFAULT NULL, `order_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `order_start_date_time` datetime DEFAULT NULL, `created_at` datetime DEFAULT NOW(), `updated_at` datetime DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `composite_dfp` (`date`,`ad_unit_id_1`,`ad_unit_id_2`,`advertiser_id`,`creative_id`,`line_item_id`,`order_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; Or to modify an existing table:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://moorberry.net/blog/multi-column-unique-indexes/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2014-01-15T00:00:00+00:00" />
<meta property="article:modified_time" content="2014-01-15T00:00:00+00:00" />


  <meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Multi Column Unique Indexes"/>
<meta name="twitter:description" content="When a database key is created from a combination of two or more columns, the key is called a composite key. Each column may not be unique by itself within the database table but when combined with the other column(s) in the composite key, the combination is unique.
The following data is taken from the Google DFP Report API example source code.
CREATE TABLE `src_dfp` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `ad_unit_1` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `ad_unit_2` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `ad_unit_id_1` int(11) DEFAULT NULL, `ad_unit_id_2` int(11) DEFAULT NULL, `advertiser_id` int(11) DEFAULT NULL, `advertiser_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `creative_id` bigint(11) DEFAULT NULL, `creative_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `date` date DEFAULT NULL, `line_item_cost_per_unit` int(11) DEFAULT NULL, `line_item_cost_type` varchar(11) COLLATE utf8_unicode_ci DEFAULT NULL, `line_item_end_date_time` datetime DEFAULT NULL, `line_item_id` int(11) DEFAULT NULL, `line_item_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `line_item_start_date_time` datetime DEFAULT NULL, `line_item_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `merged_ad_server_clicks` int(11) DEFAULT NULL, `merged_ad_server_impressions` int(11) DEFAULT NULL, `order_end_date_time` datetime DEFAULT NULL, `order_id` int(11) DEFAULT NULL, `order_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `order_start_date_time` datetime DEFAULT NULL, `created_at` datetime DEFAULT NOW(), `updated_at` datetime DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `composite_dfp` (`date`,`ad_unit_id_1`,`ad_unit_id_2`,`advertiser_id`,`creative_id`,`line_item_id`,`order_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; Or to modify an existing table:"/>
<meta name="twitter:site" content="@mothore"/>

  <meta itemprop="name" content="Multi Column Unique Indexes">
<meta itemprop="description" content="When a database key is created from a combination of two or more columns, the key is called a composite key. Each column may not be unique by itself within the database table but when combined with the other column(s) in the composite key, the combination is unique.
The following data is taken from the Google DFP Report API example source code.
CREATE TABLE `src_dfp` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `ad_unit_1` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `ad_unit_2` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `ad_unit_id_1` int(11) DEFAULT NULL, `ad_unit_id_2` int(11) DEFAULT NULL, `advertiser_id` int(11) DEFAULT NULL, `advertiser_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `creative_id` bigint(11) DEFAULT NULL, `creative_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `date` date DEFAULT NULL, `line_item_cost_per_unit` int(11) DEFAULT NULL, `line_item_cost_type` varchar(11) COLLATE utf8_unicode_ci DEFAULT NULL, `line_item_end_date_time` datetime DEFAULT NULL, `line_item_id` int(11) DEFAULT NULL, `line_item_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `line_item_start_date_time` datetime DEFAULT NULL, `line_item_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `merged_ad_server_clicks` int(11) DEFAULT NULL, `merged_ad_server_impressions` int(11) DEFAULT NULL, `order_end_date_time` datetime DEFAULT NULL, `order_id` int(11) DEFAULT NULL, `order_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `order_start_date_time` datetime DEFAULT NULL, `created_at` datetime DEFAULT NOW(), `updated_at` datetime DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `composite_dfp` (`date`,`ad_unit_id_1`,`ad_unit_id_2`,`advertiser_id`,`creative_id`,`line_item_id`,`order_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; Or to modify an existing table:"><meta itemprop="datePublished" content="2014-01-15T00:00:00+00:00" />
<meta itemprop="dateModified" content="2014-01-15T00:00:00+00:00" />
<meta itemprop="wordCount" content="543">
<meta itemprop="keywords" content="postgres,mysql,SQL,indexes,indicies," />

  
</head>
<body class="dark:bg-gray-800 dark:text-white relative flex flex-col min-h-screen"><header class="container flex justify-between md:justify-between gap-4 flex-wrap p-6 mx-auto relative">
  <a href="https://moorberry.net/" class="capitalize font-extrabold text-2xl">
    
    <img src="/logo.svg" alt="Moorberry" class="h-8 max-w-full" />
    
  </a>
  <button class="mobile-menu-button md:hidden">
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <line x1="4" y1="8" x2="20" y2="8" />
      <line x1="4" y1="16" x2="20" y2="16" />
    </svg>
  </button>
  <ul class="mobile-menu absolute z-10 px-6 pb-6 md:p-0 top-full left-0 w-full md:w-auto md:relative hidden md:flex flex-col md:flex-row items-end md:items-center gap-4 lg:gap-6 bg-white dark:bg-gray-800">

    
    <li><a href="/blog">Blog</a></li>
    
    <li><a href="/blog/content-delivery-network/">Top Post</a></li>
    

    

    
    <li class="grid place-items-center">
      <span class="open-search inline-block cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <circle cx="10" cy="10" r="7" />
          <line x1="21" y1="21" x2="15" y2="15" />
        </svg>
      </span>
    </li>
    

    
    <li class="grid place-items-center">
      <span class="toggle-dark-mode inline-block cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <circle cx="12" cy="12" r="3" />
          <line x1="12" y1="5" x2="12" y2="5.01" />
          <line x1="17" y1="7" x2="17" y2="7.01" />
          <line x1="19" y1="12" x2="19" y2="12.01" />
          <line x1="17" y1="17" x2="17" y2="17.01" />
          <line x1="12" y1="19" x2="12" y2="19.01" />
          <line x1="7" y1="17" x2="7" y2="17.01" />
          <line x1="5" y1="12" x2="5" y2="12.01" />
          <line x1="7" y1="7" x2="7" y2="7.01" />
        </svg>
      </span>
    </li>
    
  </ul>
</header>
<main class="flex-1">
  
  

  
  <div class="relative max-w-5xl mx-auto px-4">
    <img src="https://images.unsplash.com/photo-1649411138058-1559bedd4b2a?w=500&amp;auto=format&amp;fit=crop&amp;q=60&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxzZWFyY2h8MzJ8fGxhdmElMjBsYW1wfGVufDB8fDB8fHww" class="rounded-lg shadow-sm w-full object-contain" />
    
    <div class="absolute top-4 right-8 rounded shadow bg-white text-gray-900 dark:bg-gray-900 dark:text-white px-2 py-0.5">
      
  
    January 15, 2014
  


    </div>
    
  </div>
  

  <article class="prose lg:prose-lg mx-auto my-8 dark:prose-dark px-4">

    <h1 class="text-2xl font-bold mb-2">Multi Column Unique Indexes</h1>
    
    <h5 class="text-sm flex items-center flex-wrap">
      <svg xmlns="http://www.w3.org/2000/svg" class="mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <rect x="4" y="5" width="16" height="16" rx="2" />
        <line x1="16" y1="3" x2="16" y2="7" />
        <line x1="8" y1="3" x2="8" y2="7" />
        <line x1="4" y1="11" x2="20" y2="11" />
        <rect x="8" y="15" width="2" height="2" />
      </svg>
      Posted on 
  
    January 15, 2014
  


      
        &nbsp;&bull;&nbsp;
      
      <svg xmlns="http://www.w3.org/2000/svg" class="mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <circle cx="12" cy="12" r="9" />
        <polyline points="12 7 12 12 15 15" />
      </svg>
      3&nbsp;minutes
      &nbsp;&bull;
      <svg xmlns="http://www.w3.org/2000/svg" class="mx-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0" />
        <path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0" />
        <line x1="3" y1="6" x2="3" y2="19" />
        <line x1="12" y1="6" x2="12" y2="19" />
        <line x1="21" y1="6" x2="21" y2="19" />
      </svg>
      543&nbsp;words
      
        
      
    </h5>
    

    <details id="TableOfContents" class="px-4 mt-8 mb-8 bg-gray-100 dark:bg-gray-700 rounded toc">
    <summary class="flex items-center font-bold py-2 px-4 cursor-pointer justify-between select-none text-black dark:text-white">
      <span>Table of contents</span>
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-down" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <polyline points="6 9 12 15 18 9"></polyline>
     </svg>
    </summary>

    <ul class="mt-2 pb-4">
        

        
        <li>
        <a href="#mysql-workbench">MySQL Workbench</a>
        </li></ul>
  </details>

    <p>When a database key is created from a combination of two or more columns, the key is called a <strong>composite key</strong>. Each column may not be unique by itself within the database table but when combined with the other column(s) in the composite key, the combination is unique.</p>
<!-- more -->
<p>The following data is taken from the <strong>Google DFP Report API</strong> example source code.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#ff79c6">CREATE</span> <span style="color:#ff79c6">TABLE</span> <span style="color:#ff79c6">`</span>src_dfp<span style="color:#ff79c6">`</span> (
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>id<span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">int</span>(<span style="color:#bd93f9">11</span>) unsigned <span style="color:#ff79c6">NOT</span> <span style="color:#ff79c6">NULL</span> AUTO_INCREMENT,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>ad_unit_1<span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">varchar</span>(<span style="color:#bd93f9">255</span>) <span style="color:#ff79c6">COLLATE</span> utf8_unicode_ci <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>ad_unit_2<span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">varchar</span>(<span style="color:#bd93f9">255</span>) <span style="color:#ff79c6">COLLATE</span> utf8_unicode_ci <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>ad_unit_id_1<span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">int</span>(<span style="color:#bd93f9">11</span>) <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>ad_unit_id_2<span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">int</span>(<span style="color:#bd93f9">11</span>) <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>advertiser_id<span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">int</span>(<span style="color:#bd93f9">11</span>) <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>advertiser_name<span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">varchar</span>(<span style="color:#bd93f9">255</span>) <span style="color:#ff79c6">COLLATE</span> utf8_unicode_ci <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>creative_id<span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">bigint</span>(<span style="color:#bd93f9">11</span>) <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>creative_name<span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">varchar</span>(<span style="color:#bd93f9">255</span>) <span style="color:#ff79c6">COLLATE</span> utf8_unicode_ci <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span><span style="color:#8be9fd;font-style:italic">date</span><span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">date</span> <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>line_item_cost_per_unit<span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">int</span>(<span style="color:#bd93f9">11</span>) <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>line_item_cost_type<span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">varchar</span>(<span style="color:#bd93f9">11</span>) <span style="color:#ff79c6">COLLATE</span> utf8_unicode_ci <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>line_item_end_date_time<span style="color:#ff79c6">`</span> datetime <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>line_item_id<span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">int</span>(<span style="color:#bd93f9">11</span>) <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>line_item_name<span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">varchar</span>(<span style="color:#bd93f9">255</span>) <span style="color:#ff79c6">COLLATE</span> utf8_unicode_ci <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>line_item_start_date_time<span style="color:#ff79c6">`</span> datetime <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>line_item_type<span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">varchar</span>(<span style="color:#bd93f9">255</span>) <span style="color:#ff79c6">COLLATE</span> utf8_unicode_ci <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>merged_ad_server_clicks<span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">int</span>(<span style="color:#bd93f9">11</span>) <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>merged_ad_server_impressions<span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">int</span>(<span style="color:#bd93f9">11</span>) <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>order_end_date_time<span style="color:#ff79c6">`</span> datetime <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>order_id<span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">int</span>(<span style="color:#bd93f9">11</span>) <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>order_name<span style="color:#ff79c6">`</span> <span style="color:#8be9fd;font-style:italic">varchar</span>(<span style="color:#bd93f9">255</span>) <span style="color:#ff79c6">COLLATE</span> utf8_unicode_ci <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>order_start_date_time<span style="color:#ff79c6">`</span> datetime <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>created_at<span style="color:#ff79c6">`</span> datetime <span style="color:#ff79c6">DEFAULT</span> NOW(),
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">`</span>updated_at<span style="color:#ff79c6">`</span> datetime <span style="color:#ff79c6">DEFAULT</span> <span style="color:#ff79c6">NULL</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">PRIMARY</span> <span style="color:#ff79c6">KEY</span> (<span style="color:#ff79c6">`</span>id<span style="color:#ff79c6">`</span>),
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">UNIQUE</span> <span style="color:#ff79c6">KEY</span> <span style="color:#ff79c6">`</span>composite_dfp<span style="color:#ff79c6">`</span> (<span style="color:#ff79c6">`</span><span style="color:#8be9fd;font-style:italic">date</span><span style="color:#ff79c6">`</span>,<span style="color:#ff79c6">`</span>ad_unit_id_1<span style="color:#ff79c6">`</span>,<span style="color:#ff79c6">`</span>ad_unit_id_2<span style="color:#ff79c6">`</span>,<span style="color:#ff79c6">`</span>advertiser_id<span style="color:#ff79c6">`</span>,<span style="color:#ff79c6">`</span>creative_id<span style="color:#ff79c6">`</span>,<span style="color:#ff79c6">`</span>line_item_id<span style="color:#ff79c6">`</span>,<span style="color:#ff79c6">`</span>order_id<span style="color:#ff79c6">`</span>)
</span></span><span style="display:flex;"><span>) ENGINE<span style="color:#ff79c6">=</span>InnoDB <span style="color:#ff79c6">DEFAULT</span> CHARSET<span style="color:#ff79c6">=</span>utf8 <span style="color:#ff79c6">COLLATE</span><span style="color:#ff79c6">=</span>utf8_unicode_ci;
</span></span></code></pre></div><p>Or to modify an existing table:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#ff79c6">ALTER</span> <span style="color:#ff79c6">TABLE</span> src_dfp <span style="color:#ff79c6">ADD</span> <span style="color:#ff79c6">UNIQUE</span> <span style="color:#ff79c6">index</span> composite_dfp (<span style="color:#8be9fd;font-style:italic">date</span>, ad_unit_id_1, ad_unit_id_2, advertiser_id, creative_id, line_item_id, order_id);
</span></span></code></pre></div><p></p>
<p>Which will generate these keys:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>+------------+---------------+-------------------+---------------+-----------+-------------+----------+--------+
</span></span><span style="display:flex;"><span>| Non Unique |   Key Name    | Sequence in Index |  Column Name  | Collation | Cardinality | Sub Part | Packed |
</span></span><span style="display:flex;"><span>+------------+---------------+-------------------+---------------+-----------+-------------+----------+--------+
</span></span><span style="display:flex;"><span>|          <span style="color:#bd93f9">0</span> | PRIMARY       |                 <span style="color:#bd93f9">1</span> | id            | A         |           <span style="color:#bd93f9">0</span> | NULL     | NULL   |
</span></span><span style="display:flex;"><span>|          <span style="color:#bd93f9">0</span> | composite_dfp |                 <span style="color:#bd93f9">1</span> | date          | A         |           <span style="color:#bd93f9">1</span> | NULL     | NULL   |
</span></span><span style="display:flex;"><span>|          <span style="color:#bd93f9">0</span> | composite_dfp |                 <span style="color:#bd93f9">2</span> | ad_unit_id_1  | A         |           <span style="color:#bd93f9">2</span> | NULL     | NULL   |
</span></span><span style="display:flex;"><span>|          <span style="color:#bd93f9">0</span> | composite_dfp |                 <span style="color:#bd93f9">3</span> | ad_unit_id_2  | A         |           <span style="color:#bd93f9">3</span> | NULL     | NULL   |
</span></span><span style="display:flex;"><span>|          <span style="color:#bd93f9">0</span> | composite_dfp |                 <span style="color:#bd93f9">4</span> | advertiser_id | A         |           <span style="color:#bd93f9">4</span> | NULL     | NULL   |
</span></span><span style="display:flex;"><span>|          <span style="color:#bd93f9">0</span> | composite_dfp |                 <span style="color:#bd93f9">5</span> | creative_id   | A         |           <span style="color:#bd93f9">5</span> | NULL     | NULL   |
</span></span><span style="display:flex;"><span>|          <span style="color:#bd93f9">0</span> | composite_dfp |                 <span style="color:#bd93f9">6</span> | line_item_id  | A         |           <span style="color:#bd93f9">6</span> | NULL     | NULL   |
</span></span><span style="display:flex;"><span>|          <span style="color:#bd93f9">0</span> | composite_dfp |                 <span style="color:#bd93f9">7</span> | order_id      | A         |           <span style="color:#bd93f9">7</span> | NULL     | NULL   |
</span></span><span style="display:flex;"><span>+------------+---------------+-------------------+---------------+-----------+-------------+----------+--------+
</span></span></code></pre></div><p><em>Don&rsquo;t let the color highlighting above fool you. <strong>date</strong> is another column in the table.</em></p>
<p>Now, if you try to rerun the same import against existing data, you&rsquo;ll receive the following error message: <code>Duplicate entry '2014-01-14-83243539-236269939-15980539-32298017059-67086499-1643' for key 'composite_dfp'</code></p>
<p>A <strong>UNIQUE</strong> index creates a constraint such that all values in the index must be distinct. An error occurs if you try to add a new row with a key value that matches an existing row. This constraint does not apply to NULL values <strong>except for the BDB storage engine</strong>. For other engines, a UNIQUE index allows multiple NULL values for columns that can contain NULL. <a href="http://dev.mysql.com/doc/refman/5.0/en/create-index.html" target="_blank" rel="noopener">Document Source</a>
</p>
<h2 id="mysql-workbench">MySQL Workbench</h2>
<p><strong>1.</strong> Go to the edit window for the table you&rsquo;re working on</p>
<img src="/images/posts/mysql-workbench.jpg" alt="MySQL Workbench" width="100%" />
<p><strong>2.</strong> Add a new index in the far-left screen by clicking on the new index row and giving the new index a name<br />
<strong>3.</strong> Select the <strong>UNIQUE</strong> type<br />
<strong>4.</strong> Check all of the corresponding index columns to the right</p>

  </article>
<div class="px-2 mb-2">
  
  <script src="https://giscus.app/client.js"
    data-repo=""
    data-repo-id=""
    data-category=""
    data-category-id=""
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="preferred_color_scheme"
    data-lang="en"
    crossorigin="anonymous"
    async>
  </script>
  
</div>
<div class="bg-blue-100 dark:bg-gray-900">
  <div class="container px-4 py-12 mx-auto max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-4 items-center">
    <div>
      <div class="text-2xl font-bold mb-2">Follow me</div>
      <p class="opacity-60">I work on web &amp; mobile application development, data integration, and AI.</p>
    </div>

    <ul class="flex justify-center gap-x-3 flex-wrap gap-y-2">
      

      
      <li>
        <a
          href="https://twitter.com/mothore"
          target="_blank"
          rel="noopener"
          aria-label="Twitter"
          class="p-1 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path
              d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z"
            />
          </svg>
        </a>
      </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      



      

      

      
      <li>
        <a
          href="https://linkedin.com/in/mminter"
          target="_blank"
          rel="noopener"
          aria-label="LinkedIn"
          class="p-1 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <rect x="4" y="4" width="16" height="16" rx="2" />
            <line x1="8" y1="11" x2="8" y2="16" />
            <line x1="8" y1="8" x2="8" y2="8.01" />
            <line x1="12" y1="16" x2="12" y2="11" />
            <path d="M16 16v-3a2 2 0 0 0 -4 0" />
          </svg>
        </a>
      </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      



      

      

      

      

      
      <li>
        <a
          href="https://github.com/michaelminter"
          target="_blank"
          rel="noopener"
          aria-label="GitHub"
          class="p-1 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path
              d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"
            />
          </svg>
        </a>
      </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      


    </ul>
  </div>
</div>

    </main><footer class="container p-6 mx-auto flex justify-between items-center">
  <span class="text-sm font-light">
    
    Copyright © 2024 - Michael Minter · All rights reserved
    
  </span>
  <span onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="p-1 cursor-pointer">
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5"
      stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M18 15l-6 -6l-6 6h12" />
    </svg>
  </span>
</footer>

<div class="search-ui absolute top-0 left-0 w-full h-full bg-white dark:bg-gray-800 hidden">
  <div class="container max-w-3xl mx-auto p-12">
    <div class="relative">
      <div class="my-4 text-center text-2xl font-bold">Search</div>

      <span class="p-2 absolute right-0 top-0 cursor-pointer close-search">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
      </span>
    </div>

    <input type="search" class="py-2 px-3 w-full dark:text-black border dark:border-transparent"
      placeholder="Enter search query" />

    <div class="search-results text-lg font-medium my-4 hidden">Results</div>
    <ul class="search-list my-2">

    </ul>

    <div class="no-results text-center my-8 hidden">
      <div class="text-xl font-semibold mb-2">No results found</div>
      <p class="font-light text-sm">Try adjusting your search query</p>
    </div>
  </div>
</div>





<script src="https://moorberry.net/js/scripts.min.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-0CQGBT41S6"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-0CQGBT41S6', { 'anonymize_ip': false });
}
</script>





<script>
  
  const darkmode = document.querySelector('.toggle-dark-mode');
  function toggleDarkMode() {
    if (document.documentElement.classList.contains('dark')) {
      document.documentElement.classList.remove('dark')
      localStorage.setItem('darkmode', 'light')
    } else {
      document.documentElement.classList.add('dark')
      localStorage.setItem('darkmode', 'dark')
    }
  }
  if (darkmode) {
    darkmode.addEventListener('click', toggleDarkMode);
  }

  const darkStorage = localStorage.getItem('darkmode');
  const isBrowserDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

  if (!darkStorage && isBrowserDark) {
    document.documentElement.classList.add('dark');
  }

  if (darkStorage && darkStorage === 'dark') {
    toggleDarkMode();
  }
</script>


<script>
  const mobileMenuButton = document.querySelector('.mobile-menu-button')
  const mobileMenu = document.querySelector('.mobile-menu')
  function toggleMenu() {
    mobileMenu.classList.toggle('hidden');
    mobileMenu.classList.toggle('flex');
  }
  if(mobileMenu && mobileMenuButton){
    mobileMenuButton.addEventListener('click', toggleMenu)
  }
</script>
</body>
</html>
